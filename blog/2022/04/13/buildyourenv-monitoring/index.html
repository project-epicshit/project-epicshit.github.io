<!doctype html><html lang=en-us><head><meta charset=utf-8><meta name=robots content="all,follow"><meta name=googlebot content="index,follow,snippet,archive"><meta name=viewport content="width=device-width,initial-scale=1"><title>Monitoring of Kubernetes Cluster &amp;hellip;</title><meta name=author content="Fabian Born"><meta name=keywords content="Fabian Born,hugo,go"><meta name=description content><meta name=generator content="Hugo 0.85.0"><link href="//fonts.googleapis.com/css?family=Roboto:400,100,100italic,300,300italic,500,700,800" rel=stylesheet type=text/css><link rel=stylesheet href=//use.fontawesome.com/releases/v5.11.2/css/all.css><link rel=stylesheet href=//maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css integrity=sha384-BVYiiSIFeK1dGmJRAkycuHAHRg32OmUcww7on3RYdg4Va+PmSTsz/K68vbdEjh4u crossorigin=anonymous><link href=/css/animate.css rel=stylesheet><link href=/css/style.blue.css rel=stylesheet id=theme-stylesheet><link href=/css/custom.css rel=stylesheet><!--[if lt IE 9]><script src=https://oss.maxcdn.com/html5shiv/3.7.2/html5shiv.min.js></script><script src=https://oss.maxcdn.com/respond/1.4.2/respond.min.js></script><![endif]--><link rel="shortcut icon" href=/img/favicon.ico type=image/x-icon><link rel=apple-touch-icon href=/img/apple-touch-icon.png><link href=/css/owl.carousel.css rel=stylesheet><link href=/css/owl.theme.css rel=stylesheet><link rel=alternate href=https://project.epicshit.io/index.xml type=application/rss+xml title="-:: Cloud is yours and all the new things ::-"><meta property="og:locale" content="en_us"><meta property="og:site_name" content="-:: Cloud is yours and all the new things ::-"><meta property="og:title" content="Monitoring of Kubernetes Cluster &amp;hellip;"><meta property="og:type" content="article"><meta property="og:url" content="https://project.epicshit.io/blog/2022/04/13/buildyourenv-monitoring/"><meta property="og:description" content><meta property="og:image" content="https://project.epicshit.io/byke_title_monitoring.png"><meta property="og:image:type" content="image/png"><meta property="og:image:width" content="528"><meta property="og:image:height" content="280"><meta property="og:updated_time" content="2022-04-13T00:00:00+0200"><meta property="article:section" content="NetApp"><meta property="article:published_time" content="2022-04-13T00:00:00+0200"><meta property="article:modified_time" content="2022-04-13T00:00:00+0200"><meta name=twitter:card content="summary_large_image"><meta name=twitter:title content="Monitoring of Kubernetes Cluster &amp;hellip;"><meta name=twitter:image content="https://project.epicshit.io/byke_title_monitoring.png"><meta name=twitter:description content></head><body><div id=all><header class=navbar-affixed-top data-spy=affix data-offset-top=62><div class="navbar navbar-default yamm" role=navigation id=navbar><div class=container><div class=navbar-header><a class="navbar-brand home" href=/><img src=/img/logo.png alt="Monitoring of Kubernetes Cluster ... logo" class="hidden-xs hidden-sm">
<img src=/img/logo.png alt="Monitoring of Kubernetes Cluster ... logo" class="visible-xs visible-sm">
<span class=sr-only>Monitoring of Kubernetes Cluster ... - go to homepage</span></a><div class=navbar-buttons><button type=button class="navbar-toggle btn-template-main" data-toggle=collapse data-target=#navigation>
<span class=sr-only>Toggle Navigation</span>
<i class="fas fa-align-justify"></i></button></div></div><div class="navbar-collapse collapse" id=navigation><ul class="nav navbar-nav navbar-right"><li class=dropdown><a href=/>Home</a></li><li class="dropdown use-yamm yamm-fw"><a href=# class=dropdown-toggle data-toggle=dropdown role=button aria-haspopup=true aria-expanded=false>Blog <span class=caret></span></a><ul class=dropdown-menu><li><div class=yamm-content><div class=row><div class=col-sm-6><img src=/img/blogging.png class="img-responsive hidden-xs"></div><div class=col-sm-3><h5>Blog Posts</h5><ul><li><a href=/blog/>all Posts</a></li><li><a href=/categories/devops/>DevOps</a></li><li><a href=/categories/cloud/>Cloud</a></li><li><a href=/categories/netapp/>NetApp</a></li></ul></div><div class=col-sm-3></div></div></div></li></ul></li><li class="dropdown use-yamm yamm-fw"><a href=# class=dropdown-toggle data-toggle=dropdown role=button aria-haspopup=true aria-expanded=false>Community <span class=caret></span></a><ul class=dropdown-menu><li><div class=yamm-content><div class=row><div class=col-sm-6><img src=https://connectedindustry.net/wp-content/uploads/sites/18/2016/11/icon-community-300x234.png class="img-responsive hidden-xs"></div><div class=col-sm-3><h5>Enter Community</h5><ul><li><a href=https://auth.epicshit.io/if/flow/default-enrollment-flow/>Sign Up</a></li><li><a href=https://auth.epicshit.io>Login</a></li></ul></div><div class=col-sm-3></div></div></div></li></ul></li></ul></div><div class="collapse clearfix" id=search><form class=navbar-form role=search><div class=input-group><input type=text class=form-control placeholder=Search>
<span class=input-group-btn><button type=submit class="btn btn-template-main"><i class="fas fa-search"></i></button></span></div></form></div></div></div></header><div id=heading-breadcrumbs><div class=container><div class=row><div class=col-md-12><h1>Monitoring of Kubernetes Cluster ...</h1></div></div></div></div><div id=content><div class=container><div class=row><div class=col-md-9 id=blog-post><p class="text-muted text-uppercase mb-small text-right">April 13, 2022</p><div id=post-content><h2 id=-with-netapp-cloud-insights>&mldr; with NetApp Cloud Insights</h2><p>Monitoring Kubernetes Clusters. A must in the service world. Anyone who provides service platforms must be able to tell at any time which and how many resources the customer&rsquo;s applications are consuming. Immediately everyone thinks of <strong>Prometheus</strong> or maybe <strong>Splunk</strong>. But the most common tool is Prometheus.
Prometheus collects performance data of pods and services from the Kubernetes cluster and then displays it via <strong>Grafana</strong>. So why use a new or different tool?</p><p>NetApp Cloud Insight not only does performance monitoring but much more? It supports</p><ul><li>troubleshooting</li><li>chargeback</li><li>Custom specific dashboards</li></ul><p>Especially in troubleshooting, the end-to-end play an important role. This is exactly where Cloud Insights has its strengths.</p><h3 id=enable-cloud-insights>Enable Cloud Insights</h3><p>However, the following post only shows how to add your Kubernetes clusters to Cloud Insights and add basic monitoring. The previous posts have already shown how to set up a Kubernetes cluster on Azure or GCP.</p><p>But if you want to know more about troubleshooting, you can contact me or one of the specialists.</p><p>If you already have an instance / or the newly created one available, you get the link displayed and can now login there.
)</p><p>The central entry point for Cloud Insights is Cloud Central. If you are not registered yet, you should do so and have the possibility to try out many products via a trial.</p><p>After registration you can start your own Cloud Insights instance via <strong>&ldquo;Products&rdquo;</strong> &ndash; <strong>&ldquo;Cloud Insights&rdquo;</strong> &ndash; <strong>&ldquo;Start Free Trial&rdquo;</strong>.</p><h3 id=generate-api-token>Generate API token</h3><p>Because Cloud Insights is a NetApp service, the performance data is sent to. To do this, a piece of software must be installed in the Kubernetes cluster, but before this can be done, the following requirements must first be met.</p><ol><li>Kubernetes Cluster needs access to Cloud Insights infrastructure (Internet Access). A list of addresses can be found here.</li><li>an API token is needed for the Data Collector: How to create an API token is now the next step:</li></ol><p>In the menu <strong>&ldquo;ADMIN&rdquo;</strong> &ndash; <strong>&ldquo;API Access&rdquo;</strong> &ndash; <strong>"+ API Access Token"</strong>.</p><p><a href=https://youtu.be/S1ar8Ti7Ggw><img src=https://img.youtube.com/vi/S1ar8Ti7Ggw/0.jpg alt="Create API token for CI and Kubernetes"></a></p><p>After saving, you get your token, which you should store safely</p><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash>eyJraWQiOiI5OTk5IiwidHlwIjoiSldUIiwiYWxnIjoiSFMzODQifQ.eyJjcmVhdG9yTG9naW4iOiJzYW1scHxOZXRBcHBTQU1MfGZhYmlhbmIiLCJkaXNwbGF5TmFtZSI6ImZhYmlhbmItS3ViZXJuZXRlcy1DSS1BUElUb2tlbiAob24gYmVoYWxmIG9mIEZhYmlhbiBCb3JuKSIsInJvbGVzIjpbXSwiaXNzIjoib2NpIiwibmFtZSI6ImZhYmlhbmItS3ViZXJuZXRlcy1DSS1BUElUb2tlbiIsImFwaSI6InRydWUiLCJleHAiOjE2ODEyODk1NzksImxvZ2luIjoiOTE1YjEyY2EtZTYwMy00MGJhLWJlMzktMjI1YzA5NmI5ZWI5IiwiaWF0IjoxNjQ5NzUzNTc5LCJ0ZW5hbnQiOiI4ZDQxOTVhNi1lYmI4LTRhZDAtYTZlZi00MTMwMjM0MGI1YWYifQ.1HZ7C6OL9ViBqodCss8bYOv9P0pgvYWtFg1LubZGCf3YZ6bICBGxJn3NfVPWfd6s
</code></pre></div><h3 id=install-data-collector-to-kubernetes-cluster>Install Data Collector to Kubernetes cluster</h3><p>Now that the API token has been generated, we deal with the preparation or installation of the data collector. The list of all available data collectors can be found under &ldquo;ADMIN&rdquo; &ndash; &ldquo;Data Collectors&rdquo; &ndash; &ldquo;+ Data Collector&rdquo;. Either scroll through the list to the desired data collector or enter it into the search mask and select the operator-based collector for Kubernetes. Now you get a wizard that guides you through the installation of the data collector.</p><p><a href=https://youtu.be/6Ovzo__3iSU><img src=https://img.youtube.com/vi/6Ovzo__3iSU/0.jpg alt="Deploy CI Data Collector for Kubernetes"></a></p><p>If you have successfully installed the Data Collector, you should see similar output:</p><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash>  % Total    % Received % Xferd  Average Speed   Time    Time     Time  Curren
                                 Dload  Upload   Total   Spent    Left  Speed
  <span style=color:#ae81ff>0</span>     <span style=color:#ae81ff>0</span>    <span style=color:#ae81ff>0</span>     <span style=color:#ae81ff>0</span>    <span style=color:#ae81ff>0</span>     <span style=color:#ae81ff>0</span>      <span style=color:#ae81ff>0</span>      <span style=color:#ae81ff>0</span> --:--:--  0:01:33 --:--:--     <span style=color:#ae81ff>0</span>
  <span style=color:#ae81ff>0</span>     <span style=color:#ae81ff>0</span>    <span style=color:#ae81ff>0</span>     <span style=color:#ae81ff>0</span>    <span style=color:#ae81ff>0</span>     <span style=color:#ae81ff>0</span>      <span style=color:#ae81ff>0</span>      <span style=color:#ae81ff>0</span> --:--:--  0:01:34 --:--:--     <span style=color:#ae81ff>0</span>
<span style=color:#ae81ff>100</span> <span style=color:#ae81ff>17344</span>  <span style=color:#ae81ff>100</span> <span style=color:#ae81ff>17344</span>    <span style=color:#ae81ff>0</span>     <span style=color:#ae81ff>0</span>    <span style=color:#ae81ff>174</span>      <span style=color:#ae81ff>0</span>  0:01:39  0:01:39 --:--:--  <span style=color:#ae81ff>4280</span>
namespace/netapp-monitoring created
secret/monitoring-operator-secret created
serviceaccount/monitoring-operator created
customresourcedefinition.apiextensions.k8s.io/agents.monitoring.netapp.com created
role.rbac.authorization.k8s.io/agent-leader-election-role created
clusterrole.rbac.authorization.k8s.io/agent-manager-role created
clusterrole.rbac.authorization.k8s.io/agent-proxy-role created
clusterrole.rbac.authorization.k8s.io/agent-metrics-reader created
rolebinding.rbac.authorization.k8s.io/agent-leader-election-rolebinding created
clusterrolebinding.rbac.authorization.k8s.io/agent-manager-rolebinding created
clusterrolebinding.rbac.authorization.k8s.io/agent-proxy-rolebinding created
clusterrolebinding.rbac.authorization.k8s.io/agent-cluster-admin-rolebinding created
service/agent-controller-manager-metrics-service created
deployment.apps/monitoring-operator created
secret/docker created
Getting operator based installer config...
  % Total    % Received % Xferd  Average Speed   Time    Time     Time  Current
                                 Dload  Upload   Total   Spent    Left  Speed
<span style=color:#ae81ff>100</span>  <span style=color:#ae81ff>3691</span>  <span style=color:#ae81ff>100</span>  <span style=color:#ae81ff>3691</span>    <span style=color:#ae81ff>0</span>     <span style=color:#ae81ff>0</span>     <span style=color:#ae81ff>35</span>      <span style=color:#ae81ff>0</span>  0:01:45  0:01:45 --:--:--  <span style=color:#ae81ff>1021</span>
agent.monitoring.netapp.com/agent-monitoring-netapp created
</code></pre></div><p>The result is now, that you can see all resources of your Kubernetes Cluster in Cloud Insights.
<a href=https://youtu.be/TvyMNF3eu00><img src=https://img.youtube.com/vi/TvyMNF3eu00/0.jpg alt="Kubernetes Cluster in CI"></a></p><p><em><strong>My conclusion</strong></em>: It is super easy to add your cluster to the monitoring with the Data Collector for Kubernetes. An important advantage is that you do not have to operate the infrastructure for the tool yourself, but use it as a service! Normally, I&rsquo;m a big fan of automation and standardization of the individual steps. Unfortunately, this is currently not possible. So you have to do it step by step ;-)</p></div></div><div class=col-md-3><div class="panel panel-default sidebar-menu"><div class=panel-heading><h3 class=panel-title>Search</h3></div><div class=panel-body><form action=//google.com/search method=get accept-charset=utf-8 role=search><div class=input-group><input type=search name=q class=form-control placeholder=Search>
<input type=hidden name=sitesearch value=https://project.epicshit.io/>
<span class=input-group-btn><button type=submit class="btn btn-template-main"><i class="fas fa-search"></i></button></span></div></form></div></div><div class="panel panel-default sidebar-menu"><div class=panel-heading><h3 class=panel-title>Categories</h3></div><div class=panel-body><ul class="nav nav-pills nav-stacked"><li><a href=/categories/ansible>ANSIBLE (4)</a></li><li><a href=/categories/astra-control>ASTRA-CONTROL (2)</a></li><li><a href=/categories/astracontrol>ASTRACONTROL (5)</a></li><li><a href=/categories/automation>AUTOMATION (6)</a></li><li><a href=/categories/azure>AZURE (5)</a></li><li><a href=/categories/cloud>CLOUD (3)</a></li><li><a href=/categories/devops>DEVOPS (11)</a></li><li><a href=/categories/docker>DOCKER (7)</a></li><li><a href=/categories/gcp>GCP (5)</a></li><li><a href=/categories/hashicorp>HASHICORP (1)</a></li><li><a href=/categories/homematic>HOMEMATIC (2)</a></li><li><a href=/categories/jenkins>JENKINS (2)</a></li><li><a href=/categories/kubernetes>KUBERNETES (11)</a></li><li><a href=/categories/netapp>NETAPP (11)</a></li><li><a href=/categories/powershell>POWERSHELL (1)</a></li><li><a href=/categories/trident>TRIDENT (11)</a></li></ul></div></div><div class="panel sidebar-menu"><div class=panel-heading><h3 class=panel-title>Tags</h3></div><div class=panel-body><ul class=tag-cloud><li><a href=/tags/ansible><i class="fas fa-tags"></i> ansible</a></li><li><a href=/tags/automation><i class="fas fa-tags"></i> automation</a></li><li><a href=/tags/cloud><i class="fas fa-tags"></i> cloud</a></li><li><a href=/tags/hashicorp><i class="fas fa-tags"></i> hashicorp</a></li></ul></div></div></div></div></div></div><footer id=footer><div class=container><div class="col-md-4 col-sm-6"><h4>About us</h4><p>That's all my own thoughts.</p><hr class="hidden-md hidden-lg hidden-sm"></div><div class="col-md-4 col-sm-6"><h4>Recent posts</h4><div class=blog-entries><div class="item same-height-row clearfix"><div class="image same-height-always"><a href=https://project.epicshit.io/blog/2023/04/25/netapptridentintheedge/><img src=/na_devops.png class=img-responsive alt="NetApp Trident in the Edge"></a></div><div class="name same-height-always"><h5><a href=https://project.epicshit.io/blog/2023/04/25/netapptridentintheedge/>NetApp Trident in the Edge</a></h5></div></div><div class="item same-height-row clearfix"><div class="image same-height-always"><a href=https://project.epicshit.io/blog/2022/04/13/buildyourenv-monitoring/><img src=/byke_title_monitoring.png class=img-responsive alt="Monitoring of Kubernetes Cluster ..."></a></div><div class="name same-height-always"><h5><a href=https://project.epicshit.io/blog/2022/04/13/buildyourenv-monitoring/>Monitoring of Kubernetes Cluster ...</a></h5></div></div><div class="item same-height-row clearfix"><div class="image same-height-always"><a href=https://project.epicshit.io/blog/2022/04/03/buildyourenv-addbackup/><img src=/nadevops-autobackup.png class=img-responsive alt="Add Kubernetes Cluster to Astra Control"></a></div><div class="name same-height-always"><h5><a href=https://project.epicshit.io/blog/2022/04/03/buildyourenv-addbackup/>Add Kubernetes Cluster to Astra Control</a></h5></div></div></div><hr class="hidden-md hidden-lg"></div></div></footer><div id=copyright><div class=container><div class=col-md-12><p class=pull-left>Copyright (c) 2021, Fabian Born; all rights reserved.</p><p class=pull-right>Template by <a href=https://bootstrapious.com/p/universal-business-e-commerce-template>Bootstrapious</a>.
Ported to Hugo by <a href=https://github.com/devcows/hugo-universal-theme>DevCows</a>.</p></div></div></div></div><script type=application/javascript>var doNotTrack=!1;doNotTrack||(function(a,e,f,g,b,c,d){a.GoogleAnalyticsObject=b,a[b]=a[b]||function(){(a[b].q=a[b].q||[]).push(arguments)},a[b].l=1*new Date,c=e.createElement(f),d=e.getElementsByTagName(f)[0],c.async=1,c.src=g,d.parentNode.insertBefore(c,d)}(window,document,'script','https://www.google-analytics.com/analytics.js','ga'),ga('create','UA-144284829-1','auto'),ga('send','pageview'))</script><script src=//code.jquery.com/jquery-3.1.1.min.js integrity="sha256-hVVnYaiADRTO2PzUGmuLJr8BLUSjGIZsDYGmIJLv2b8=" crossorigin=anonymous></script><script src=//maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js integrity=sha384-Tc5IQib027qvyjSMfHjOMaLkfuWVxZxUPnCJA7l2mCWNIpG9mGCD8wGNIcPD7Txa crossorigin=anonymous></script><script src=//cdnjs.cloudflare.com/ajax/libs/jquery-cookie/1.4.1/jquery.cookie.min.js></script><script src=//cdnjs.cloudflare.com/ajax/libs/waypoints/4.0.1/jquery.waypoints.min.js></script><script src=//cdnjs.cloudflare.com/ajax/libs/Counter-Up/1.0/jquery.counterup.min.js></script><script src=//cdnjs.cloudflare.com/ajax/libs/jquery-parallax/1.1.3/jquery-parallax.js></script><script src=/js/front.js></script><script src=/js/owl.carousel.min.js></script></body></html>