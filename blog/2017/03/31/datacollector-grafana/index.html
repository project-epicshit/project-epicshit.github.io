<!doctype html><html lang=en-us><head><meta charset=utf-8><meta name=robots content="all,follow"><meta name=googlebot content="index,follow,snippet,archive"><meta name=viewport content="width=device-width,initial-scale=1"><title>Datacollector für HomeMatic und Grafana</title><meta name=author content="Fabian Born"><meta name=keywords content="Fabian Born,hugo,go"><meta name=description content><meta name=generator content="Hugo 0.85.0"><link href="//fonts.googleapis.com/css?family=Roboto:400,100,100italic,300,300italic,500,700,800" rel=stylesheet type=text/css><link rel=stylesheet href=//use.fontawesome.com/releases/v5.11.2/css/all.css><link rel=stylesheet href=//maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css integrity=sha384-BVYiiSIFeK1dGmJRAkycuHAHRg32OmUcww7on3RYdg4Va+PmSTsz/K68vbdEjh4u crossorigin=anonymous><link href=/css/animate.css rel=stylesheet><link href=/css/style.blue.css rel=stylesheet id=theme-stylesheet><link href=/css/custom.css rel=stylesheet><!--[if lt IE 9]><script src=https://oss.maxcdn.com/html5shiv/3.7.2/html5shiv.min.js></script><script src=https://oss.maxcdn.com/respond/1.4.2/respond.min.js></script><![endif]--><link rel="shortcut icon" href=/img/favicon.ico type=image/x-icon><link rel=apple-touch-icon href=/img/apple-touch-icon.png><link href=/css/owl.carousel.css rel=stylesheet><link href=/css/owl.theme.css rel=stylesheet><link rel=alternate href=https://project.epicshit.io/index.xml type=application/rss+xml title="-:: Cloud is yours and all the new things ::-"><meta property="og:locale" content="en_us"><meta property="og:site_name" content="-:: Cloud is yours and all the new things ::-"><meta property="og:title" content="Datacollector für HomeMatic und Grafana"><meta property="og:type" content="article"><meta property="og:url" content="https://project.epicshit.io/blog/2017/03/31/datacollector-grafana/"><meta property="og:description" content><meta property="og:image" content="https://project.epicshit.io/img/grafana-overview.png"><meta property="og:image:type" content="image/png"><meta property="og:image:width" content="600"><meta property="og:image:height" content="111"><meta property="og:updated_time" content="2017-03-31T12:00:00+0200"><meta property="article:section" content="homematic"><meta property="article:published_time" content="2017-03-31T12:00:00+0200"><meta property="article:modified_time" content="2017-03-31T12:00:00+0200"><meta name=twitter:card content="summary_large_image"><meta name=twitter:title content="Datacollector für HomeMatic und Grafana"><meta name=twitter:image content="https://project.epicshit.io/img/grafana-overview.png"><meta name=twitter:description content></head><body><div id=all><header class=navbar-affixed-top data-spy=affix data-offset-top=62><div class="navbar navbar-default yamm" role=navigation id=navbar><div class=container><div class=navbar-header><a class="navbar-brand home" href=/><img src=/img/logo.png alt="Datacollector für HomeMatic und Grafana logo" class="hidden-xs hidden-sm">
<img src=/img/logo.png alt="Datacollector für HomeMatic und Grafana logo" class="visible-xs visible-sm">
<span class=sr-only>Datacollector für HomeMatic und Grafana - go to homepage</span></a><div class=navbar-buttons><button type=button class="navbar-toggle btn-template-main" data-toggle=collapse data-target=#navigation>
<span class=sr-only>Toggle Navigation</span>
<i class="fas fa-align-justify"></i></button></div></div><div class="navbar-collapse collapse" id=navigation><ul class="nav navbar-nav navbar-right"><li class=dropdown><a href=/>Home</a></li><li class="dropdown use-yamm yamm-fw"><a href=# class=dropdown-toggle data-toggle=dropdown role=button aria-haspopup=true aria-expanded=false>Blog <span class=caret></span></a><ul class=dropdown-menu><li><div class=yamm-content><div class=row><div class=col-sm-6><img src=/img/blogging.png class="img-responsive hidden-xs"></div><div class=col-sm-3><h5>Blog Posts</h5><ul><li><a href=/blog/>all Posts</a></li><li><a href=/categories/devops/>DevOps</a></li><li><a href=/categories/cloud/>Cloud</a></li><li><a href=/categories/netapp/>NetApp</a></li></ul></div><div class=col-sm-3></div></div></div></li></ul></li><li class="dropdown use-yamm yamm-fw"><a href=# class=dropdown-toggle data-toggle=dropdown role=button aria-haspopup=true aria-expanded=false>Community <span class=caret></span></a><ul class=dropdown-menu><li><div class=yamm-content><div class=row><div class=col-sm-6><img src=https://connectedindustry.net/wp-content/uploads/sites/18/2016/11/icon-community-300x234.png class="img-responsive hidden-xs"></div><div class=col-sm-3><h5>Enter Community</h5><ul><li><a href=https://login.epicshit.io/signin/register>Sign Up</a></li><li><a href=https://login.epicshit.io>Login</a></li></ul></div><div class=col-sm-3></div></div></div></li></ul></li></ul></div><div class="collapse clearfix" id=search><form class=navbar-form role=search><div class=input-group><input type=text class=form-control placeholder=Search>
<span class=input-group-btn><button type=submit class="btn btn-template-main"><i class="fas fa-search"></i></button></span></div></form></div></div></div></header><div id=heading-breadcrumbs><div class=container><div class=row><div class=col-md-12><h1>Datacollector für HomeMatic und Grafana</h1></div></div></div></div><div id=content><div class=container><div class=row><div class=col-md-9 id=blog-post><p class="text-muted text-uppercase mb-small text-right">March 31, 2017</p><div id=post-content><p><img src=/img/grafana-overview.png alt="Grafana Screenshot">
Wer kennt das nicht. Heizt die Heizung richtig? Wie verhält sich die Raumtemperatur? Wie sieht es mit der Luftfeutigkeit im Zimmer aus?</p><p>Homematic bietet zwar die Möglichkeit Werte in einem Graphen darzustellen. Das war für mich allerdings sehr unbefriedigend. Und eine andere Lösung muss her:</p><h2 id=visualisierung-mit-grafana>Visualisierung mit Grafana</h2><p>Grafana bietet die beste Möglichkeit, Werte zur visualisieren. Dies setzt neben einer lauffähigen Grafana Instanz auch einen Datacollector voraus, der die Daten von der Homematic CCU2 ausliest, verarbeitet und an Grafana sendet.</p><p>Auch langes Suchen, brachte keinen Ergebnisse. So habe ich mich dazu entschlossen, einen eigenen Datacollector zu schreiben: <a href=https://github.com/fabian-born/hm2grafana title="hm2grafana on GitHub">hm2grafana</a></p><h2 id=wie-funktioniert-der-datacollector>Wie funktioniert der Datacollector?</h2><p>Das Script liest via XML-RPC API die Werte von der Homematic aus, konvertiert die Daten für Grafana und sendet sie anschließend an Graphite Server.</p><p>In der ersten Version kann der Datacollector manuell ausgeführt werden</p><pre><code>$ ./hm2grafana.py -c conf/hm2grafana.conf
</code></pre><p>oder als Cron-Job</p><pre><code>$ */5 * * * * &lt;path-to-hm2grafana&gt;/hm2grafana.py -c &lt;path-to-hm2grafana&gt;conf/hm-collector.conf &gt; /dev/null
</code></pre><p>Folgende Zeilen können im Config-File angepasst werden:</p><pre><code>[general]
ccu = ccu2-fqdn
username =
password =
loglevel = INFO
# Graphite Server + Port|

[grafana]
graphiteserver = graphite-fqdn
graphiteport = 2003
grafanaroot = homematic
</code></pre><p>Für aktuellere Informationen zum Konfigurieren und ausführen des Datacollector findet man auf der GitHub-Projekt Seite: <a href=https://github.com/fabian-born/hm2grafana title="hm2grafana on gitlab">hm2grafana</a></p></div></div><div class=col-md-3><div class="panel panel-default sidebar-menu"><div class=panel-heading><h3 class=panel-title>Search</h3></div><div class=panel-body><form action=//google.com/search method=get accept-charset=utf-8 role=search><div class=input-group><input type=search name=q class=form-control placeholder=Search>
<input type=hidden name=sitesearch value=https://project.epicshit.io/>
<span class=input-group-btn><button type=submit class="btn btn-template-main"><i class="fas fa-search"></i></button></span></div></form></div></div><div class="panel panel-default sidebar-menu"><div class=panel-heading><h3 class=panel-title>Categories</h3></div><div class=panel-body><ul class="nav nav-pills nav-stacked"><li><a href=/categories/ansible>ANSIBLE (4)</a></li><li><a href=/categories/astra-control>ASTRA-CONTROL (2)</a></li><li><a href=/categories/automation>AUTOMATION (6)</a></li><li><a href=/categories/cloud>CLOUD (3)</a></li><li><a href=/categories/devops>DEVOPS (6)</a></li><li><a href=/categories/docker>DOCKER (2)</a></li><li><a href=/categories/hashicorp>HASHICORP (1)</a></li><li><a href=/categories/homematic>HOMEMATIC (2)</a></li><li><a href=/categories/jenkins>JENKINS (2)</a></li><li><a href=/categories/kubernetes>KUBERNETES (6)</a></li><li><a href=/categories/netapp>NETAPP (6)</a></li><li><a href=/categories/powershell>POWERSHELL (1)</a></li><li><a href=/categories/trident>TRIDENT (6)</a></li></ul></div></div><div class="panel sidebar-menu"><div class=panel-heading><h3 class=panel-title>Tags</h3></div><div class=panel-body><ul class=tag-cloud><li><a href=/tags/ansible><i class="fas fa-tags"></i> ansible</a></li><li><a href=/tags/automation><i class="fas fa-tags"></i> automation</a></li><li><a href=/tags/cloud><i class="fas fa-tags"></i> cloud</a></li><li><a href=/tags/hashicorp><i class="fas fa-tags"></i> hashicorp</a></li></ul></div></div></div></div></div></div><footer id=footer><div class=container><div class="col-md-4 col-sm-6"><h4>About us</h4><p>That's all my own thoughts.</p><hr class="hidden-md hidden-lg hidden-sm"></div><div class="col-md-4 col-sm-6"><h4>Recent posts</h4><div class=blog-entries><div class="item same-height-row clearfix"><div class="image same-height-always"><a href=https://project.epicshit.io/blog/2021/12/12/netappastrarelease202112/><img src=https://img.youtube.com/vi/zOYvFYP-Xnk/0.jpg class=img-responsive alt="Backup and Restore with NetApp "></a></div><div class="name same-height-always"><h5><a href=https://project.epicshit.io/blog/2021/12/12/netappastrarelease202112/>Backup and Restore with NetApp</a></h5></div></div><div class="item same-height-row clearfix"><div class="image same-height-always"><a href=https://project.epicshit.io/blog/2021/08/12/netappacsbackupandrestore/><img src=https://img.youtube.com/vi/UcUUqcjWzFg/0.jpg class=img-responsive alt="Backup and Restore with NetApp "></a></div><div class="name same-height-always"><h5><a href=https://project.epicshit.io/blog/2021/08/12/netappacsbackupandrestore/>Backup and Restore with NetApp</a></h5></div></div><div class="item same-height-row clearfix"><div class="image same-height-always"><a href=https://project.epicshit.io/blog/2021/01/22/tridentautomatedinstall_update/><img src=/img/autotridentupdate.png class=img-responsive alt="Installer Addon for NetApp Trident using kubectl - Update"></a></div><div class="name same-height-always"><h5><a href=https://project.epicshit.io/blog/2021/01/22/tridentautomatedinstall_update/>Installer Addon for NetApp Trident using kubectl - Update</a></h5></div></div></div><hr class="hidden-md hidden-lg"></div></div></footer><div id=copyright><div class=container><div class=col-md-12><p class=pull-left>Copyright (c) 2021, Fabian Born; all rights reserved.</p><p class=pull-right>Template by <a href=https://bootstrapious.com/p/universal-business-e-commerce-template>Bootstrapious</a>.
Ported to Hugo by <a href=https://github.com/devcows/hugo-universal-theme>DevCows</a>.</p></div></div></div></div><script type=application/javascript>var doNotTrack=!1;doNotTrack||(function(a,e,f,g,b,c,d){a.GoogleAnalyticsObject=b,a[b]=a[b]||function(){(a[b].q=a[b].q||[]).push(arguments)},a[b].l=1*new Date,c=e.createElement(f),d=e.getElementsByTagName(f)[0],c.async=1,c.src=g,d.parentNode.insertBefore(c,d)}(window,document,'script','https://www.google-analytics.com/analytics.js','ga'),ga('create','UA-144284829-1','auto'),ga('send','pageview'))</script><script src=//code.jquery.com/jquery-3.1.1.min.js integrity="sha256-hVVnYaiADRTO2PzUGmuLJr8BLUSjGIZsDYGmIJLv2b8=" crossorigin=anonymous></script><script src=//maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js integrity=sha384-Tc5IQib027qvyjSMfHjOMaLkfuWVxZxUPnCJA7l2mCWNIpG9mGCD8wGNIcPD7Txa crossorigin=anonymous></script><script src=//cdnjs.cloudflare.com/ajax/libs/jquery-cookie/1.4.1/jquery.cookie.min.js></script><script src=//cdnjs.cloudflare.com/ajax/libs/waypoints/4.0.1/jquery.waypoints.min.js></script><script src=//cdnjs.cloudflare.com/ajax/libs/Counter-Up/1.0/jquery.counterup.min.js></script><script src=//cdnjs.cloudflare.com/ajax/libs/jquery-parallax/1.1.3/jquery-parallax.js></script><script src=/js/front.js></script><script src=/js/owl.carousel.min.js></script></body></html>